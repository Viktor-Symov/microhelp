
=========================================
=== Справка по find.
=== Поиск каталогов и файлов.
=========================================

1. Как использовать команду find:
# find [path] [expression]


2. Поиск по типу:
f – простые файлы
d – каталоги
l – символические ссылки
b – блочные устройства (dev)
c – символьные устройства (dev)
p – именованные каналы
s – сокеты


3. Поиск по имени:
# find /home/ -type f -name "*.txt"
# find . -type d -name "my_folder"


4. Поиск по размеру файла:
Параметр -size:
+ – Поиск файлов больше заданного размера
– – Поиск файлов меньше заданного размера
Отсутствие знака - должен полностью совпадать.
Единицы измерения:
c — Байт
k — Кбайт
M — Мбайт
G — Гбайт

# find /home/ -size +100M

Поиск пустых файлов и каталогов
# find /home/ -empty


5. Поиск файлов по дате:
-mtime – Время изменения файла. Указывается в днях.
-mmin – Время изменения в минутах.
-atime – Время последнего обращения к объекту в днях.
-amin – Время последнего обращения в минутах.
-ctime – Последнее изменение владельца или прав на объект в днях.
-cmin – Последнее изменение владельца или прав в минутах.

Файлы изменённые в каталоге /home/ за последние 60 минут:
# find /home/ -cmin -60

Файлы изменённые в каталоге /home/ более чем за последние 60 минут:
# find /home/ -cmin +60


6. Поиск по пользователю или группе:
Используются параметры -user и -group:

Все файлы пользователя admin:
# find /home/ -user admin

Поиск по правам доступа, используется параметр -perm.

Все файлы с правами 777:
# find /home/ -perm 777


7. Поиск с использованием логических операторов:
-a – Логическое И. Объединяет несколько критериев поиска.
-o – Логическое ИЛИ. Ищем на основе одного из критериев поиска.
-not или ! – Логическое НЕ.

Все файлы начинающиеся на sess_ или заканчивающиеся на tmp:
# find /home/ -type f -name "sess_*" -o -name "*tmp"


8. Исключить из поиска определённые папки:

Все файлы с расширением .php, изменённые за последние 2 дня во всех папках сайта, кроме папок /bitrix/managed_cache/ и /bitrix/cache/:
# find /home/www/ -type f -name "*.php" -mtime -1 -not -path "*/bitrix/managed_cache/*" -not -path "*/bitrix/cache/*"


9. Удалить найденные файлы:
Параметр -delete.

Удалить все файлы старше 10 дней:
# find /tmp/ -type f -mtime +10 -delete
