=========================================
=== Справка по команде nc.
=== NetCat служит для передачи и получения данных посредством протоколов TCP и UDP.
=========================================

Основной синтаксис nc:

$ nc -параметры адрес порт(ы)

Часть параметров указывается с уточняющими значениями, а часть без них. Вот список наиболее востребованных параметров:
    -6 – использовать протокол IPv6. По умолчанию используется параметр -4 и IPv4 соответственно;
    -h – вывести справку со списком доступных параметров;
    -i задержка – добавить задержку между отправкой строк или сканированием портов. Задаётся в секундах;
    -l – режим прослушивания. Используется с указанием порта;
    -N – закрыть соединение при достижении конца файла при его отправке;
    -n – Работать с IP-адресами напрямую, не задействуя DNS, также отключить поиск портов;
    -P имя_пользователя – указать имя пользователя для подключения к прокси;
    -x адрес:порт – указать адрес и порт для подключения к прокси;
    -p порт – указать номер порта. В большинстве случаев порт считывается без указания параметра;
    -U – использовать сокет домена UNIX (для межпроцессного взаимодействия);
    -u – использовать протокол UDP, по умолчанию используется TСP;
    -v – подробный режим. Используется при сканировании портов;
    -W количество_пакетов – закрыть соединение после получения определённого количества пакетов;
    -w таймер – включить таймер для ограничения времени соединения. Задаётся в секундах;
    -z – отключить отправку данных. Используется при сканировании портов.

Примеры использования nc:
1. Проверка порта:
    $ nc -vz 192.168.31.247 8080
    $ nc -vz 192.168.31.247 1-1000 2>&1 | grep succeeded
    $ nc -vz 192.168.31.247 1-1000 2>&1 | grep open
    $ nc -vzu 192.168.31.247 1-1000 2>&1 | grep succeeded

2. Прослушивание порта:
    $ nc -nlv 8080

3. Обмен текстом и файлами:
    На первом ПК запускаем в режиме прослушивания порта:
    $ nc -lp 8080
    На втором ПК указываем адрес первого ПК и тот же самый порт:
    $ nc x.x.x.x 8080
    Ввод либо вывод можно перенаправить в(из) файл(а):
    $ nc -l 8080 > paste.txt
    $ nc -N 0.0.0.0 8080 < copy.txt

4. Запуск веб-сервера (страница-заглушка):
    $ while true; do echo -e "HTTP/1.1 200 OK\n\n$(cat index.html)" | nc -l -w 1 -p 8080; done

5. Изменить другой файл crontab. Требуются права системного администратора:
    $ crontab -u

6. Проверка сервиса SSH:
    $ echo "EXIT" | nc 192.168.0.113 22
    SSH-2.0-OpenSSH_7.9p1 Debian-10
    Protocol mismatch.

7. Проверка ошибок в логах запуска задач cron:
    $ grep -i error /var/log/syslog | grep CRON

8. Протестировать запуск задачи в cron:
    $ SHELL=/bin/bash PATH=/usr/bin:/bin ./command.sh

9. Установить пользовательские переменные HOME, PATH, SHELL и MAILTO и запускать команду каждую минуту.
    HOME=/opt
    PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
    SHELL=/usr/bin/zsh
    MAILTO=email@example.com
    */1 * * * * command

